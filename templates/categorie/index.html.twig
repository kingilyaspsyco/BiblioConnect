{% extends 'base.html.twig' %}

{% block title %}Liste des CatÃ©gories ğŸ“‚{% endblock %}

{% block body %}
    <div class="container mt-5">
        <h1 style="color:rgb(28, 79, 135);">ğŸ“‚ Liste des CatÃ©gories</h1>

        <div class="d-flex justify-content-between align-items-center mb-3">
            <input type="text" id="search" placeholder="ğŸ” Rechercher une catÃ©gorie..." class="form-control w-50" />

            {% if is_granted('ROLE_ADMIN') or is_granted('ROLE_LIBRARIAN') %}
                <a href="{{ path('app_categories_new') }}" class="btn btn-success ms-3">â• Ajouter une catÃ©gorie</a>
            {% endif %}
        </div>

        <div id="categories-list">
            {% include 'categorie/_categories_list.html.twig' with { categories: categories } %}
        </div>

        <a href="{{ path('app_home') }}" class="btn btn-secondary mt-4">â¬…ï¸ Retour Ã  l'accueil</a>
    </div>

    <script>
        const searchInput = document.getElementById('search');
        const categoriesList = document.getElementById('categories-list');

        searchInput.addEventListener('input', function () {
            fetch('{{ path('app_categories_search') }}?q=' + encodeURIComponent(this.value))
                .then(response => response.text())
                .then(html => {
                    categoriesList.innerHTML = html;
                });
        });
    </script>
{% endblock %}
